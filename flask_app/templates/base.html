<!doctype html>
<html>
    <head>
        <title>{% block title %}{% endblock %}</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" 
            rel="stylesheet" 
            integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" 
            crossorigin="anonymous">
    </head>
    <body>
        <nav class="navbar border-bottom shadow-sm p-3 px-md-4 mb-3">
            <div class="container">
                <div class="navbar-brand">{{ self.title() }}</div>
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <a class="nav-link" href="/">Accueil</a>
                </ul>
                <form class="d-flex me-3" method="GET" action="/search"> <!-- Ajoutez une marge droite ici -->
                    <input class="form-control me-2" type="search" placeholder="Rechercher..." aria-label="Search" name="query" required>
                    <button class="btn btn-outline-primary" type="submit">Rechercher</button>
                </form>
                {% if 'user' in session %}
                <form method="POST" action="/logout">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <div class="btn-group">
                        <a href="/list/create" class="btn btn-outline-primary">Ajouter une liste</a>
                        <a href="/book/create" class="btn btn-outline-primary">Ajouter un livre</a>
                        <a href="/change_password" class="btn btn-outline-secondary">Mot de passe</a>
                        <span class="btn btn-primary disabled">{{ session['user']['name'] }}</span>
                        <button type="submit" class="btn btn-outline-primary">DÃ©connexion</button>
                    </div>
                </form>
                {% else %}
                <a class="btn btn-outline-primary" href="/login">Connexion</a>
                {% endif %}
            </div>
        </nav>
        <div class="container">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="alert alert-warning">
                        {% for message in messages %}{{ message }}{% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            {% block content %}{% endblock %}
        </div>
    </body>
</html>